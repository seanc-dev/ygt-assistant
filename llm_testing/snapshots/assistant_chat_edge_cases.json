{
  "scenario": "assistant_chat_edge_cases",
  "steps": [
    {
      "action": "reset_state",
      "response": {
        "ok": true,
        "cleared": {
          "approvals": true,
          "history": true,
          "queue": true,
          "settings": false
        }
      }
    },
    {
      "endpoint": "/chat",
      "method": "POST",
      "response": {
        "messages": [
          {
            "role": "assistant",
            "content": "Unknown command. Try: 'scan', 'approve <id>', or 'skip <id>'."
          }
        ]
      },
      "status": 200
    },
    {
      "endpoint": "/chat",
      "method": "POST",
      "response": {
        "messages": [
          {
            "role": "assistant",
            "content": "Not found."
          }
        ]
      },
      "status": 200
    },
    {
      "endpoint": "/chat",
      "method": "POST",
      "response": {
        "messages": [
          {
            "role": "assistant",
            "content": "Proposed 1 approval(s). Reply 'approve <id>' or 'skip <id>'."
          }
        ],
        "approvals": [
          {
            "id": "appr-1",
            "title": "Follow up on top email",
            "kind": "email",
            "status": "proposed"
          }
        ]
      },
      "status": 200
    },
    {
      "endpoint": "/chat",
      "method": "POST",
      "response": {
        "messages": [
          {
            "role": "assistant",
            "content": "Proposed 1 approval(s). Reply 'approve <id>' or 'skip <id>'."
          }
        ],
        "approvals": [
          {
            "id": "appr-1",
            "title": "Follow up on top email",
            "kind": "email",
            "status": "proposed"
          }
        ]
      },
      "status": 200
    },
    {
      "endpoint": "/chat",
      "method": "POST",
      "response": {
        "messages": [
          {
            "role": "assistant",
            "content": "Proposed 1 approval(s). Reply 'approve <id>' or 'skip <id>'."
          }
        ],
        "approvals": [
          {
            "id": "appr-1",
            "title": "Follow up on top email",
            "kind": "email",
            "status": "proposed"
          }
        ]
      },
      "status": 200
    },
    {
      "endpoint": "/chat",
      "method": "POST",
      "response": {
        "messages": [
          {
            "role": "assistant",
            "content": "Skipped appr-1."
          }
        ]
      },
      "status": 200
    }
  ],
  "text": "{'ok': True, 'cleared': {'approvals': True, 'history': True, 'queue': True, 'settings': False}}\n{'messages': [{'role': 'assistant', 'content': \"Unknown command. Try: 'scan', 'approve <id>', or 'skip <id>'.\"}]}\n{'messages': [{'role': 'assistant', 'content': 'Not found.'}]}\n{'messages': [{'role': 'assistant', 'content': \"Proposed 1 approval(s). Reply 'approve <id>' or 'skip <id>'.\"}], 'approvals': [{'id': 'appr-1', 'title': 'Follow up on top email', 'kind': 'email', 'status': 'proposed'}]}\n{'messages': [{'role': 'assistant', 'content': \"Proposed 1 approval(s). Reply 'approve <id>' or 'skip <id>'.\"}], 'approvals': [{'id': 'appr-1', 'title': 'Follow up on top email', 'kind': 'email', 'status': 'proposed'}]}\n{'messages': [{'role': 'assistant', 'content': \"Proposed 1 approval(s). Reply 'approve <id>' or 'skip <id>'.\"}], 'approvals': [{'id': 'appr-1', 'title': 'Follow up on top email', 'kind': 'email', 'status': 'proposed'}]}\n{'messages': [{'role': 'assistant', 'content': 'Skipped appr-1.'}]}"
}