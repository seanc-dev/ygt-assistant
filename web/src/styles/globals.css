@tailwind base;
@tailwind components;
@tailwind utilities;

/* Global height and scroll lock */
html,
body,
#__next,
#root {
  height: 100%;
}

body {
  overflow: hidden; /* prevent document scrolling; panes will scroll */
  @apply bg-[var(--lw-base)] text-[var(--lw-neutral-text)] antialiased;
  font-family: var(--lw-font-body);
}

/* Calm, low-load defaults */
:root {
  color-scheme: light dark;
}

html {
  font-size: 17px; /* slightly larger for readability */
}

a {
  @apply text-[var(--lw-primary)] underline-offset-4 transition-colors hover:opacity-80;
}

button:focus-visible,
a:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
  @apply outline-none ring-2 ring-[var(--lw-primary)] ring-opacity-70 ring-offset-2;
}

.focus-outline {
  @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--lw-primary)] focus-visible:ring-opacity-70 focus-visible:ring-offset-2;
}

/* Input focus glow */
input:focus,
textarea:focus,
select:focus {
  @apply outline-none;
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.4); /* primary @ 40% opacity */
}

[data-theme="dark"] input:focus,
[data-theme="dark"] textarea:focus,
[data-theme="dark"] select:focus {
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.4);
}

/* Fade-in animation for quick actions */
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.fade-in {
  animation: fadeIn 0.2s ease;
}

/* Workroom min-height sizing */
:root {
  --top-nav-h: 56px;
  --page-vpad: 16px;
}

/* Workroom grid layout and transitions */
.workroom-grid {
  transition: grid-template-columns 180ms ease-in-out;
  height: 100%; /* ensures it fills the flex-1 area */
  grid-template-rows: minmax(
    0,
    1fr
  ); /* establish definite row height and ignore min-content */
  align-items: stretch; /* stretch items along the block axis */
  align-content: stretch; /* ensure track fills container */
  /* Ensure the grid stretches to viewport minus TopNav and page vertical padding */
  min-height: calc(
    100svh - var(--top-nav-h, 56px) - (2 * var(--page-vpad, 16px))
  );
}

/* Any direct child pane of the grid is a flex column with its own scroll area */
.workroom-grid > .pane {
  display: flex;
  flex-direction: column;
  height: 100%;
  position: relative;
  min-height: max(
    50vh,
    calc(100svh - var(--top-nav-h, 56px) - (2 * var(--page-vpad, 16px)))
  );
}

/* The inner content area that should scroll */
.pane .scroll-area {
  min-height: 0;
  overflow: auto;
  flex: 1 1 auto;
}

.h-100 {
  height: 100%;
}

/* Kanban enter animation */
.kanban-container {
  opacity: 0;
  animation: kanbanFade 120ms ease-in-out forwards;
}

@keyframes kanbanFade {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
